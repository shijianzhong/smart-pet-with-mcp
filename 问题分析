/*
 * 错误根源分析
 */
// 1. 主进程(index.js)中缺少IPC处理器注册
// 2. 预加载脚本中暴露了API，但主进程没有相应的处理器
// 3. 架构改造后未完全实现或同步更新相关处理函数 

/*
 * 核心问题分析
 */
// 1. 虽然导入了新的服务管理器和对话服务，但实际上代码中仍然使用globalMCPClient
// 2. mcp-service-manager.js只是一个简化版过渡方案，没有实现真正的解耦
// 3. 缺少conversation-service.js实现
// 4. 主进程中的processQuery处理函数虽然支持新旧格式，但内部仍然调用的是旧的客户端 

/*
 * 工具获取问题分析
 */
// 1. 仍然依赖旧客户端获取工具列表，可以完全移除这部分逻辑 
// 2. mcp_tools表为空，没有正确保存工具到数据库
// 3. 需要修改服务器连接逻辑，确保工具信息被正确保存 